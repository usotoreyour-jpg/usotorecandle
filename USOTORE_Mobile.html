<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>USOTORE Mobile</title>

<link href="https://fonts.googleapis.com/css2?family=Rajdhani:wght@500;700&display=swap" rel="stylesheet">

<script src="https://unpkg.com/lightweight-charts/dist/lightweight-charts.standalone.production.js"></script>

<style>
body{
    margin:0;
    background:#0a0a0a;
    font-family:"Rajdhani","Noto Sans JP",sans-serif;
    color:white;
}
#title{
    text-align:center;
    padding:12px;
    font-size:20px;
    letter-spacing:6px;
    color:#fbbf24;
}
#chart{
    height:60vh;
    width:100%;
    position:relative;
}
.entry-line-high{
    position:absolute;
    border-top:2px solid #22c55e;
    width:100%;
}
.entry-line-low{
    position:absolute;
    border-top:2px solid #ef4444;
    width:100%;
}
.panel{
    padding:10px;
    background:#111;
}
button{
    width:100%;
    padding:14px;
    border:none;
    border-radius:8px;
    font-size:18px;
    font-weight:700;
    color:#111;
    margin-bottom:8px;
}
#highBtn{background:#22c55e;}
#lowBtn{background:#ef4444;}
#log{
    font-size:12px;
    opacity:0.7;
}
</style>

</head>
<body>

<div id="title">USOTORE</div>
<div id="chart"></div>

<div class="panel">
    <button id="highBtn">HIGH</button>
    <button id="lowBtn">LOW</button>
    <div id="log"></div>
</div>

<script>
/* --- CHART SETUP --- */
const chart = LightweightCharts.createChart(document.getElementById("chart"), {
    layout:{ background:{color:'#0a0a0a'}, textColor:'#fff' },
    grid:{ vertLines:{color:'#222'}, horzLines:{color:'#222'} },
    timeScale:{ borderColor:'#333' },
    rightPriceScale:{ borderColor:'#333' },
});

const candleSeries = chart.addCandlestickSeries();

/* ダミーデータ生成 */
const data = [];
let t = 1700000000;
for(let i=0;i<200;i++){
    const o = 100 + Math.random()*5;
    const c = o + Math.random()*2-1;
    const h = Math.max(o,c) + Math.random();
    const l = Math.min(o,c) - Math.random();
    data.push({time:t++, open:o, high:h, low:l, close:c});
}
candleSeries.setData(data);

/* --- LINE DISPLAY --- */
function addEntryLine(direction){
    const chartEl = document.getElementById("chart");

    const price = data[data.length-1].close; // 最新価格
    const height = chartEl.clientHeight;
    const y = height * Math.random(); // 仮の位置

    const line = document.createElement("div");
    line.style.top = `${y}px`;

    if(direction==="HIGH"){
        line.classList.add("entry-line-high");
    }else{
        line.classList.add("entry-line-low");
    }

    chartEl.appendChild(line);
    log(`${direction}エントリー`);
}

/* --- UI --- */
function log(msg){
    const logbox = document.getElementById("log");
    logbox.innerHTML = msg + "<br>" + logbox.innerHTML;
}
document.getElementById("highBtn").onclick = ()=>addEntryLine("HIGH");
document.getElementById("lowBtn").onclick = ()=>addEntryLine("LOW");
</script>

</body>
</html>
